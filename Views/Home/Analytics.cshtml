@{
    ViewBag.Title = "Analytics";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
    table.dataTable {
        font-size: 15px !important;
    }
    /* ===== Page Header ===== */
    .page-header {
        background: #ffffff;
        padding: 16px 24px;
        border-radius: 12px;
        margin-bottom: 20px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.05);
    }

    .page-header-title h5 {
        font-weight: 600;
        color: #2c3e50;
    }

    .breadcrumb {
        background: transparent;
        padding: 0;
        margin-bottom: 0;
        font-size: 13px;
    }

    .breadcrumb-item a {
        color: #0d6efd;
        font-weight: 500;
    }

    /* ===== Card ===== */
    .card {
        border-radius: 14px;
        border: none;
        box-shadow: 0 6px 16px rgba(0,0,0,0.08);
    }

        /* ===== Headings ===== */
        .card h4 {
            font-weight: 600;
            color: #1f2d3d;
        }

        .card h5 {
            font-weight: 600;
            color: #34495e;
        }

    /* ===== Form Section ===== */
    label {
        font-weight: 500;
        color: #555;
        margin-bottom: 6px;
    }

    .form-control {
        border-radius: 8px;
        padding: 10px 12px;
        font-size: 14px;
        border: 1px solid #ced4da;
        transition: border-color 0.2s, box-shadow 0.2s;
    }

        .form-control:focus {
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.15rem rgba(13,110,253,.15);
        }

    #btnSubmit {
        border-radius: 8px;
        padding: 10px;
        font-weight: 600;
        font-size: 14px;
    }

    /* ===== Divider ===== */
    hr {
        margin: 25px 0;
        border-top: 1px solid #e0e0e0;
    }

    /* ===== Table ===== */
    #tblQuestions {
        border-radius: 10px;
        overflow: hidden;
    }

        #tblQuestions thead {
            background-color: #f8f9fa;
        }

        #tblQuestions th {
            font-weight: 600;
            font-size: 13.5px;
            color: #333;
            text-align: center;
            white-space: nowrap;
        }

        #tblQuestions td {
            font-size: 15px;
            text-align: center;
            vertical-align: middle;
        }

    /* ===== DataTable Controls ===== */
    .dataTables_filter input {
        border-radius: 6px;
        padding: 6px 10px;
        border: 1px solid #ccc;
    }

    .dataTables_length select {
        border-radius: 6px;
        padding: 5px 8px;
    }

    .dataTables_paginate .paginate_button {
        border-radius: 6px !important;
    }

    /* ===== Action Buttons ===== */
    .btn-edit {
        background-color: #0d6efd;
        border-radius: 6px;
        font-size: 12px;
        padding: 4px 10px;
    }

    .btn-delete {
        background-color: #dc3545;
        border-radius: 6px;
        font-size: 12px;
        padding: 4px 10px;
    }

    .page-header {
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        padding: 18px 24px;
        border-radius: 12px;
        color: #ffffff;
        margin-bottom: 20px;
    }

        .page-header h5 {
            color: #ffffff;
            font-weight: 600;
        }

        .page-header .breadcrumb {
            background: transparent;
            margin-bottom: 0;
        }

            .page-header .breadcrumb a {
                color: #cfe3ff;
            }

        .page-header .breadcrumb-item.active,
        .page-header .breadcrumb-item {
            color: #ffffff;
        }

    /* =========================================
    CARD ENHANCEMENT
    ========================================= */

    .card {
        border-radius: 16px;
        border: none;
        background: #ffffff;
        transition: all 0.3s ease;
    }

        .card:hover {
            box-shadow: 0 20px 45px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }

        /* Card title */
        .card h4 {
            font-weight: 600;
            color: #1e3c72;
        }

    /* =========================================
    FORM CONTROLS
    ========================================= */

    .form-label {
        color: #333;
        margin-bottom: 6px;
    }

    .form-control,
    .form-select {
        border-radius: 10px;
        padding: 10px 14px;
        border: 1px solid #dcdcdc;
        transition: all 0.25s ease;
    }

        .form-control:focus,
        .form-select:focus {
            border-color: #1e88e5;
            box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.25);
        }

    /* =========================================
    UPLOAD BUTTON
    ========================================= */

    #btnSubmit {
        background: linear-gradient(90deg, #1976d2, #0d47a1);
        border: none;
        padding: 10px 22px;
        font-weight: 600;
        border-radius: 10px;
        letter-spacing: 0.4px;
        color: #fff;
        transition: all 0.3s ease;
    }

        #btnSubmit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(25, 118, 210, 0.45);
        }

    /* =========================================
    DATATABLE STYLING
    ========================================= */

    .table {
        border-radius: 12px;
        overflow: hidden;
    }

        .table thead th {
            background: linear-gradient(135deg, #e3f2fd, #f1f8ff);
            color: #0d47a1;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
        }

        .table tbody td {
            vertical-align: middle;
            font-size: 13px;
        }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #fafafa;
    }

    .table-bordered > :not(caption) > * {
        border-color: #e0e0e0;
    }

    /* Hover row effect */
    .table tbody tr:hover {
        background-color: #e3f2fd;
        transition: background 0.2s ease;
    }

    /* =========================================
    DATATABLE CONTROLS (SEARCH, PAGINATION)
    ========================================= */

    .dataTables_filter input {
        border-radius: 8px;
        border: 1px solid #ccc;
        padding: 6px 10px;
    }

    .dataTables_paginate .paginate_button {
        border-radius: 6px !important;
        padding: 6px 12px !important;
        margin: 0 2px;
    }

        .dataTables_paginate .paginate_button.current {
            background: linear-gradient(90deg, #2196f3, #1e88e5) !important;
            color: #ffffff !important;
            border: none !important;
        }

        .dataTables_paginate .paginate_button:hover {
            background: #e3f2fd !important;
        }

    .main-content {
        padding: 0 !important;
    }

        /* Remove Bootstrap row gutters */
        .main-content .row {
            margin-left: 0 !important;
            margin-right: 0 !important;
        }

        /* Remove column padding */
        .main-content .col-md-12 {
            padding-left: 0 !important;
            padding-right: 0 !important;
        }

        /* Make card full-width & flush */
        .main-content .card {
            margin: 0 !important;
            border-radius: 0 !important;
            box-shadow: none !important;
        }

            /* Optional: keep inner padding clean */
            .main-content .card.p-4 {
                padding: 20px !important; /* inner spacing only */
            }
</style>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>


<div class="page-header" style="border-radius: 0px;">
    <div class="page-header-left d-flex align-items-center">
        <div class="page-header-title">
            <h5 class="m-b-10">Requested Exams</h5>
        </div>
        <ul class="breadcrumb">
            <li class="breadcrumb-item"><a href="@Url.Action("Index","Home")">Admin</a></li>
            <li class="breadcrumb-item">Request Exam</li>
        </ul>
    </div>
</div>

<div class="main-content">
    <div class="row">
        <div class="col-md-12">
            @*<h5 class="mb-3">Requeste For Exam</h5>*@
            <div class="table-responsive">
                <table id="tblQuestions" class="ritik ritik table table-bordered table-striped align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>#</th>
                            <th>Student Name</th>
                            <th>Subject</th>
                            <th>Exam</th>
                            <th>Questions</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script>
    var studentTable = null;
    $(document).ready(function () {

        studentTable = $('#tblQuestions').DataTable({
            paging: true,
            searching: true,
            ordering: true,
            lengthChange: true,
            columns: [
                { data: "id" },
                { data: "name" },
                { data: "subject_title" },
                { data: "exam_title" },
                { data: "question_cnt" },
                { data: "status" },

                {
                    data: null,
                    title: "Action",
                    orderable: false,
                    searchable: false,
                    render: function (data, type, row) {
                        return `
<div style="display:flex; gap:6px; justify-content:center;">
    <button class="btn btn-sm btn-success btn-approve" data-id="${row.subject_id}">
        Approve
    </button>
 <button class="btn btn-sm btn-danger btn-reject" data-id="${row.subject_id}">
        Reject
    </button>
</div>
        `;
                    }
                }
            ]
        });
        GetAllRequest();
    });



    function GetAllRequest() {
        $.ajax({
            url: "@Url.Action("GetAllRequested", "Student")",
            crossDomain: true,
            success: function (data) {
                console.log(data);
                var resultData = _.map(data.data, function (innerArray) {
                    var obj = {};
                    _.each(innerArray, function (item) {
                        obj[item.Key] = item.Value;
                    });
                    return obj;
                });
                studentTable.clear().rows.add(resultData).draw();
            }
        });
    }


</script>